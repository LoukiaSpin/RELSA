# 2. load raw data for basic model and parameter estimation (relsa_load)
# 3. Determine the filtered variables and build a testframe (testset)
# 4. normalize the variables to a range [0;100] (relsa_norm)
# 5. Re-scale "positive" variables (relsa_scaleTurn)
##### Laura Model Single Tests #########################################
testraw      <- relsa_load("C:/MHH Bleich/Papers/PostOPPaper/Data/post-op laura.txt" )
vars         <- names(testraw[,-c(1:4)])
pre_test     <- cbind(testraw[,1:4], testraw[,vars])
testset      <- relsa_norm(pre_test, normthese=c("bur2h","burON","hr","hrv", "temp", "act", "mgs" ), ontime=1)
animal       <- 28
RELSA        <- relsa(set=testset, bsl, a=animal, drop=c("bw","score","mgs30","mgs180" ), turnvars=c("hr", "mgs","temp" ), relsaNA=NA)
relsascore   <- as.numeric(unlist(RELSA$relsa$rms))
testset[testset$id==unique(testset$id)[animal],]
# show raw data + RELSA
plotset       <- relsa_plot(pre_test, RELSA, levels=levels, animal=animal, plotvar=NULL,
plotRELSA=TRUE, myylim=c(80,120), myYlim=c(0,1.4))
library(RELSA)
library(ROCR)
############ BSL & General ##################
# load some data and subsets
raw          <- relsa_load("C:/MHH Bleich/Papers/PostOPPaper/Data/post-op laura.txt", treatment = "Transmitter" )
raw
write.table(raw,file=("C:/MHH Bleich/postop.txt", rownames=1, header=T, sep="\t")
write.table(raw,file=("C:/MHH Bleich/postop.txt"), rownames=1, header=T, sep="\t")
write.table(raw,file="C:/MHH Bleich/postop.txt", rownames=1, header=T, sep="\t")
write.table(raw,file="C:/MHH Bleich/postop.txt", sep="\t")
save(raw, file="data/postop.RData")
save(raw, file="data/postop.RData")
head(raw)
library(RELSA)
postop
library(RELSA)
postop
data(postop)
postop
library(RELSA)
postop
library(RELSA)
po<-postop
RELSA::postop
data(postop)
r<-data(postop)
r
raw
devtools::use_data(postop, raw)
usethis_data()
usethis::use_data()
?use_data
postop<-raw
usethis::use_data(postop)
library(RELSA)
postop
library(RELSA)
raw          <- postop
### Preprocessing (normalization)
vars         <- c("bwc", "bur2h","burON","hr","hrv", "temp", "act", "mgs")
turnvars     <- c("hr", "mgs", "temp" )
org          <- cbind(raw[,1:4], raw[,vars])
pre          <- relsa_norm(org, normthese=c("bur2h","burON","hr","hrv","temp","act","mgs"), ontime=1)
### Baseline/reference set calculations (with preprocessed data)
bsl          <- relsa_baselines(dataset=pre, bslday=-1, variables=vars, turnvars=turnvars)
### Determine k-clusters and levels for the reference set
levels       <- relsa_levels(pre, mypath=NULL, filename="Burrowing levels", drops=c("bw","score"),
turns=c("hr","mgs","temp"), relsaNA=NA, k=4, showScree="no",
customCol= c("red","green","blue","magenta"), seed=123, myYlim=c(0,1.4),
saveTiff="no")
library(RELSA)
raw          <- postop
### Preprocessing (normalization)
vars         <- c("bwc", "bur2h","burON","hr","hrv", "temp", "act", "mgs")
turnvars     <- c("hr", "mgs", "temp" )
org          <- cbind(raw[,1:4], raw[,vars])
pre          <- relsa_norm(org, normthese=c("bur2h","burON","hr","hrv","temp","act","mgs"), ontime=1)
pre
relsa_baselines(dataset=pre, bslday=-1, variables=vars, turnvars=turnvars)
### Baseline/reference set calculations (with preprocessed data)
bsl          <- relsa_baselines(dataset=pre, bslday=-1, variables=vars, turnvars=turnvars)
### Determine k-clusters and levels for the reference set
levels       <- relsa_levels(pre, mypath=NULL, filename="Burrowing levels", drops=c("bw","score"),
turns=c("hr","mgs","temp"), relsaNA=NA, k=4, showScree="no",
customCol= c("red","green","blue","magenta"), seed=123, myYlim=c(0,1.4),
saveTiff="no")
### Determine k-clusters and levels for the reference set
levels       <- relsa_levels(pre, mypath=NULL, bsl=bsl, filename="Burrowing levels", drops=c("bw","score"),
turns=c("hr","mgs","temp"), relsaNA=NA, k=4, showScree="no",
customCol= c("red","green","blue","magenta"), seed=123, myYlim=c(0,1.4),
saveTiff="no")
############ Analyze individual animals (here: from the reference set) #################
testraw      <- raw
vars         <- names(testraw[,-c(1:4)])
pre_test     <- cbind(testraw[,1:4], testraw[,vars])
testset      <- relsa_norm(pre_test, normthese=c("bur2h","burON","hr","hrv","temp","act","mgs"), ontime=1)
animal       <- 1
RELSA        <- relsa(set=testset, bsl, a=animal, drop=c("bw","score","mgs30","mgs180"),
turnvars=c("hr","mgs","temp"), relsaNA=NA)
# show raw data + RELSA
plotset      <- relsa_plot(pre_test, RELSA, levels=levels, animal=animal, plotvar=NULL,
plotRELSA=TRUE, myylim=c(80,120), myYlim=c(0,1.4))
?load
L<-load("postop.rda")
library(hexSticker)
?hexSticker
?hexSticker
library(hexSticker)
library(hexSticker)
?hexSticker
install.packages("sysfonts")
geom_hexagon(size = 1.2, fill = "#1881C2", color = "#87B13F")
library(hexSticker)
geom_hexagon(size = 1.2, fill = "#1881C2", color = "#87B13F")
getwd()
geom_url(url = "www.bioconductor.org", x = 1, y = 0.08,
family = "Aller_Rg", size = 1.5, color = "black", angle = 30,
hjust = 0, ...)
geom_url(url = "www.bioconductor.org", x = 1, y = 0.08,
family = "Aller_Rg", size = 1.5, color = "black", angle = 30,
hjust = 0 )
b<- geom_url(url = "www.bioconductor.org", x = 1, y = 0.08,
family = "Aller_Rg", size = 1.5, color = "black", angle = 30,
hjust = 0 )
plot(b)
sticker(expression(plot(cars, cex=.5, cex.axis=.5, mgp=c(0,.3,0), xlab="", ylab="")),
package="hexSticker", p_size=8, s_x=1, s_y=.8, s_width=1.2, s_height=1,
filename="inst/figures/baseplot.png")
library(hexSticker)
sticker(expression(plot(cars, cex=.5, cex.axis=.5, mgp=c(0,.3,0), xlab="", ylab="")),
package="hexSticker", p_size=8, s_x=1, s_y=.8, s_width=1.2, s_height=1,
filename="inst/figures/baseplot.png")
plot(cars, cex=.5, cex.axis=.5, mgp=c(0,.3,0), xlab="", ylab="")
sticker(expression(plot(cars, cex=.5, cex.axis=.5, mgp=c(0,.3,0), xlab="", ylab="")),
package="hexSticker", p_size=8, s_x=1, s_y=.8, s_width=1.2, s_height=1,
filename="C:/MHH Bleich/Papers/PostOPPaper/Relsa package/RELSA/baseplot.png")
sticker(expression(plot(cars, cex=.5, cex.axis=.5, mgp=c(0,.3,0), xlab="", ylab="")),
package="hexSticker", p_size=11, s_x=1, s_y=.8, s_width=1.2, s_height=1,
filename="C:/MHH Bleich/Papers/PostOPPaper/Relsa package/RELSA/baseplot.png")
sticker(expression(plot(cars, cex=.5, cex.axis=.5, mgp=c(0,.3,0), xlab="", ylab="")),
package="hexSticker", p_size=11, s_x=3, s_y=.8, s_width=1.2, s_height=1,
filename="C:/MHH Bleich/Papers/PostOPPaper/Relsa package/RELSA/baseplot.png")
sticker(expression(plot(cars, cex=.5, cex.axis=.5, mgp=c(0,.3,0), xlab="", ylab="")),
package="hexSticker", p_size=11, s_x=2, s_y=.8, s_width=1.2, s_height=1,
filename="C:/MHH Bleich/Papers/PostOPPaper/Relsa package/RELSA/baseplot.png")
sticker(expression(plot(cars, cex=.5, cex.axis=.5, mgp=c(0,.3,0), xlab="", ylab="")),
package="hexSticker", p_size=11, s_x=0.5, s_y=.8, s_width=1.2, s_height=1,
filename="C:/MHH Bleich/Papers/PostOPPaper/Relsa package/RELSA/baseplot.png")
sticker(expression(plot(cars, cex=.9, cex.axis=.5, mgp=c(0,.3,0), xlab="", ylab="")),
package="hexSticker", p_size=11, s_x=0.5, s_y=.8, s_width=1.2, s_height=1,
filename="C:/MHH Bleich/Papers/PostOPPaper/Relsa package/RELSA/baseplot.png")
sticker(expression(plot(cars, cex=.9, cex.axis=.5, mgp=c(0,.3,0), xlab="", ylab="")),
package="hexSticker", p_size=8, s_x=0.5, s_y=.8, s_width=1.5, s_height=1,
filename="C:/MHH Bleich/Papers/PostOPPaper/Relsa package/RELSA/baseplot.png")
sticker(bwplot, package="hexSticker", p_size=8, s_x=1.05, s_y=.75, s_width=2, s_height=1.5,
h_fill="#f9690e", h_color="#f39c12", filename="C:/MHH Bleich/Papers/PostOPPaper/Relsa package/RELSA/baseplot.png")
sticker(plot(cars, cex=.9, cex.axis=.5, mgp=c(0,.3,0), xlab="", ylab=""), package="hexSticker", p_size=8, s_x=1.05, s_y=.75, s_width=2, s_height=1.5,
h_fill="#f9690e", h_color="#f39c12", filename="C:/MHH Bleich/Papers/PostOPPaper/Relsa package/RELSA/baseplot.png")
sticker(expression(plot(cars, cex=.9, cex.axis=.5, mgp=c(0,.3,0), xlab="", ylab="")),
package="hexSticker", p_size=8, s_x=1.05, s_y=.75, s_width=2, s_height=1.5,
h_fill="#f9690e", h_color="#f39c12", filename="C:/MHH Bleich/Papers/PostOPPaper/Relsa package/RELSA/baseplot.png")
mypath <- "C:/MHH Bleich/Papers/PostOPPaper/Relsa package/RELSA Heximage/RELSAhex.png"
imgurl <- "C:/MHH Bleich/Papers/PostOPPaper/Relsa package/RELSA Heximage/Froghand.png"
sticker(imgurl, package="hexSticker", p_size=8, s_x=1, s_y=.75, s_width=.6,
filename=mypath)
imgurl <- "C:/MHH Bleich/Papers/PostOPPaper/Relsa package/RELSA Heximage/Froghand.png"
sticker(imgurl, package="hexSticker", p_size=8, s_x=1, s_y=.75, s_width=.6,
h_fill="#f9690e", h_color="#f39c12", filename=mypath)
mypath <- "C:/MHH Bleich/Papers/PostOPPaper/Relsa package/RELSA Heximage/RELSAhex.png"
imgurl <- "C:/MHH Bleich/Papers/PostOPPaper/Relsa package/RELSA Heximage/Froghand.png"
sticker(imgurl,
package   = "RELSA",
p_size    = 8,
s_x       = 1,
s_y       = .75,
s_width   = .6,
h_fill    = "#f9690e",
h_color   = "#f39c12",
filename  = mypath)
sticker(imgurl,
package   = "RELSA",
size      = 12,
p_size    = 8,
s_x       = 1,
s_y       = .75,
s_width   = .6,
h_fill    = "#f9690e",
h_color   = "#f39c12",
filename  = mypath)
sticker(imgurl,
package   = "RELSA",
p_size    = 8,
s_x       = 1,
s_y       = .75,
s_width   = .6,
h_fill    = "#f9690e",
h_color   = "#f39c12",
filename  = mypath)
sticker(imgurl,
package   = "RELSA",
p_size    = 8,
s_x       = 1,
s_y       = .75,
s_width   = .6,
h_fill    = "#f9690e",
h_color   = "#f39c12",
u_color = "black",
filename  = mypath)
sticker(imgurl,
package   = "RELSA",
p_size    = 8,
s_x       = 1,
s_y       = .75,
s_width   = .6,
h_fill    = "#f9690e",
h_color   = "#f39c12",
filename  = mypath,
dpi       = 300)
sticker(imgurl,
package   = "RELSA",
p_size    = 12,
s_x       = 1,
s_y       = .75,
s_width   = .6,
h_fill    = "#f9690e",
h_color   = "#f39c12",
filename  = mypath,
dpi       = 300)
sticker(imgurl,
package   = "RELSA",
p_size    = 25,
s_x       = 1,
s_y       = .75,
s_width   = .6,
h_fill    = "#f9690e",
h_color   = "#f39c12",
filename  = mypath,
dpi       = 300)
sticker(imgurl,
package   = "RELSA",
p_size    = 25,
s_x       = 1,
s_y       = .75,
s_width   = .6,
h_fill    = "#f9690e",
h_color   = "#f39c12",
url       = "https://talbotsr.com/relsa",
filename  = mypath,
dpi       = 300)
sticker(imgurl,
package   = "RELSA",
p_size    = 25,
s_x       = 1,
s_y       = .75,
s_width   = .6,
h_fill    = "#f9690e",
h_color   = "#f39c12",
url       = "https://talbotsr.com/relsa",
u_size    = 5,
filename  = mypath,
dpi       = 300)
sticker(imgurl,
package   = "RELSA",
p_size    = 25,
s_x       = 1,
s_y       = .75,
s_width   = .6,
h_fill    = "#f9690e",
h_color   = "#f39c12",
url       = "https://talbotsr.com/relsa",
u_size    = 5,
u_color   = "black",
filename  = mypath,
dpi       = 300)
sticker(imgurl,
package   = "RELSA",
p_color   = "black",
p_size    = 25,
s_x       = 1,
s_y       = .75,
s_width   = .6,
h_fill    = "f2f2f2", #"#f9690e",
h_color   = "#f39c12",
url       = "https://talbotsr.com/relsa",
u_size    = 5,
u_color   = "black",
filename  = mypath,
dpi       = 300)
sticker(imgurl,
package   = "RELSA",
p_color   = "black",
p_size    = 25,
s_x       = 1,
s_y       = .75,
s_width   = .6,
h_fill    = "#f2f2f2", #"#f9690e",
h_color   = "#f39c12",
url       = "https://talbotsr.com/relsa",
u_size    = 5,
u_color   = "black",
filename  = mypath,
dpi       = 300)
sticker(imgurl,
package   = "RELSA",
p_color   = "black",
p_size    = 25,
s_x       = 1,
s_y       = .75,
s_width   = .6,
h_fill    = "#f2f2f2", #"#f9690e",
h_color   = "#801622",
url       = "https://talbotsr.com/relsa",
u_size    = 5,
u_color   = "black",
filename  = mypath,
dpi       = 300)
library(hexSticker)
# https://cran.r-project.org/web/packages/hexSticker/hexSticker.pdf
mypath <- "C:/MHH Bleich/Papers/PostOPPaper/Relsa package/RELSA Heximage/RELSAhex.png"
imgurl <- "C:/MHH Bleich/Papers/PostOPPaper/Relsa package/RELSA Heximage/RELSA_logo.png"
sticker(imgurl,
package   = "RELSA",
p_color   = "black",
p_size    = 25,
s_x       = 1,
s_y       = .75,
s_width   = .6,
h_fill    = "#f2f2f2", #"#f9690e",
h_color   = "#801622",
url       = "https://talbotsr.com/relsa",
u_size    = 5,
u_color   = "black",
filename  = mypath,
dpi       = 300)
sticker(imgurl,
package   = "RELSA",
p_color   = "black",
p_size    = 25,
s_x       = 1,
s_y       = .75,
s_width   = .5,
h_fill    = "#f2f2f2", #"#f9690e",
h_color   = "#801622",
url       = "https://talbotsr.com/relsa",
u_size    = 5,
u_color   = "black",
filename  = mypath,
dpi       = 300)
sticker(imgurl,
package   = "RELSA",
p_color   = "black",
p_size    = 25,
s_x       = 1,
s_y       = .75,
s_width   = 1,
s_height  = 1,
h_fill    = "#f2f2f2", #"#f9690e",
h_color   = "#801622",
url       = "https://talbotsr.com/relsa",
u_size    = 5,
u_color   = "black",
filename  = mypath,
dpi       = 300)
library(hexSticker)
# https://cran.r-project.org/web/packages/hexSticker/hexSticker.pdf
mypath <- "C:/MHH Bleich/Papers/PostOPPaper/Relsa package/RELSA Heximage/RELSAhex.png"
imgurl <- "C:/MHH Bleich/Papers/PostOPPaper/Relsa package/RELSA Heximage/RELSA_logo.png"
sticker(imgurl,
package   = "RELSA",
p_color   = "black",
p_size    = 25,
s_x       = 1,
s_y       = .75,
s_width   = 1,
s_height  = 1,
h_fill    = "#f2f2f2", #"#f9690e",
h_color   = "#801622",
url       = "https://talbotsr.com/relsa",
u_size    = 5,
u_color   = "black",
filename  = mypath,
dpi       = 300)
sticker(imgurl,
package   = "RELSA",
p_color   = "black",
p_size    = 25,
s_x       = 1,
s_y       = .75,
s_width   = 0.9,
s_height  = 0.9,
h_fill    = "#f2f2f2", #"#f9690e",
h_color   = "#801622",
url       = "https://talbotsr.com/relsa",
u_size    = 5,
u_color   = "black",
filename  = mypath,
dpi       = 300)
sticker(imgurl,
package   = "RELSA",
p_color   = "black",
p_size    = 25,
s_x       = 1,
s_y       = .75,
s_width   = 0.7,
s_height  = 0.7,
h_fill    = "#f2f2f2", #"#f9690e",
h_color   = "#801622",
url       = "https://talbotsr.com/relsa",
u_size    = 5,
u_color   = "black",
filename  = mypath,
dpi       = 300)
sticker(imgurl,
package   = "RELSA",
p_color   = "black",
p_size    = 25,
s_x       = 1,
s_y       = .75,
s_width   = 0.75,
s_height  = 0.7,
h_fill    = "#f2f2f2", #"#f9690e",
h_color   = "#801622",
url       = "https://talbotsr.com/relsa",
u_size    = 5,
u_color   = "black",
filename  = mypath,
dpi       = 300)
sticker(imgurl,
package   = "RELSA",
p_color   = "black",
p_size    = 25,
s_x       = 1,
s_y       = .75,
s_width   = 0.8,
s_height  = 0.7,
h_fill    = "#f2f2f2", #"#f9690e",
h_color   = "#801622",
url       = "https://talbotsr.com/relsa",
u_size    = 5,
u_color   = "black",
filename  = mypath,
dpi       = 300)
sticker(imgurl,
package   = "RELSA",
p_color   = "black",
p_size    = 25,
s_x       = 1,
s_y       = .75,
s_width   = 0.7,
s_height  = 0.65,
h_fill    = "#f2f2f2", #"#f9690e",
h_color   = "#801622",
url       = "https://talbotsr.com/relsa",
u_size    = 5,
u_color   = "black",
filename  = mypath,
dpi       = 300)
sticker(imgurl,
package   = "RELSA",
p_color   = "black",
p_size    = 25,
s_x       = 1,
s_y       = .75,
s_width   = 0.7,
s_height  = 0.65,
h_fill    = "#f2f2f2", #"#f9690e",
h_color   = "black",#"#801622",
url       = "https://talbotsr.com/relsa",
u_size    = 5,
u_color   = "black",
filename  = mypath,
dpi       = 300)
library(hexSticker)
# https://cran.r-project.org/web/packages/hexSticker/hexSticker.pdf
mypath <- "C:/MHH Bleich/Papers/PostOPPaper/Relsa package/RELSA Heximage/RELSAhex.png"
imgurl <- "C:/MHH Bleich/Papers/PostOPPaper/Relsa package/RELSA Heximage/RELSA_logo.png"
sticker(imgurl,
package   = "RELSA",
p_color   = "black",
p_size    = 25,
s_x       = 1,
s_y       = .75,
s_width   = 0.7,
s_height  = 0.6 ,
h_fill    = "#f2f2f2", #"#f9690e",
h_color   = "black",#"#801622",
url       = "https://talbotsr.com/relsa",
u_size    = 5,
u_color   = "black",
filename  = mypath,
dpi       = 300)
library(hexSticker)
# https://cran.r-project.org/web/packages/hexSticker/hexSticker.pdf
mypath <- "C:/MHH Bleich/Papers/PostOPPaper/Relsa package/RELSA Heximage/RELSAhex.png"
imgurl <- "C:/MHH Bleich/Papers/PostOPPaper/Relsa package/RELSA Heximage/RELSA_logo.png"
sticker(imgurl,
package   = "RELSA",
p_color   = "black",
p_size    = 25,
s_x       = 1,
s_y       = .75,
s_width   = 0.7,
s_height  = 0.6 ,
h_fill    = "#f2f2f2", #"#f9690e",
h_color   = "black",#"#801622",
url       = "https://talbotsr.com/relsa",
u_size    = 5,
u_color   = "black",
filename  = mypath,
dpi       = 600)
pkgdown::build_site()
build_favicon()
library(pkgbuild)
build_favicon()
pkgdown::build_site()
pkgdown::build_site()
